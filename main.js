!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=e.card,o=e.handleCardClick,i=e.userData,a=e.handleCardLike,u=e.handleCardDelete;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=r.name,this._link=r.link,this._likes=r.likes,this._counterLikes=r.likes.length,this._cardId=r._id,this._ownerName=r.owner.name,this._ownerId=r.owner._id,this._user=i,this._card=r,this._openPopup=o,this._handleCardLike=a,this._handleCardDelete=u,this._cardSelector=n}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"createCard",value:function(){this._template=this._getTemplate();var e=this._template.querySelector(".elements__item-image");return this._template.querySelector(".elements__item-description-title").textContent=this._name,e.alt="здесь должна быть картинка "+this._name,e.src=this._link,this._addEventListeners(e),this._likeListener(),this._deleteListener(),this._setLikedStatus(),this._template}},{key:"_likeListener",value:function(){var e=this;this._template.querySelector(".elements__item-description-like-button").addEventListener("click",(function(t){e._handleCardLike(t).then((function(n){t.target.classList.toggle("elements__item-description-like-button__active"),e._setLikes(n)})).catch((function(e){return console.error(e)}))}))}},{key:"_setLikes",value:function(e){this._likesCounter.textContent=e.likes.length}},{key:"_setLikedStatus",value:function(){var e=this;this._likesCounter=this._template.querySelector(".elements__item-description-like-counter"),this._likesCounter.textContent=this._counterLikes,this._likes.some((function(t){return t._id===e._user}))&&this._template.querySelector(".elements__item-description-like-button").classList.add("elements__item-description-like-button__active")}},{key:"_deleteListener",value:function(){var e=this;this._deleteButton=this._template.querySelector(".elements__item-description-delete-button"),this._ownerId!==this._user?this._deleteButton.classList.add("removed"):this._deleteButton.addEventListener("click",(function(t){e._handleCardDelete()}))}},{key:"delete",value:function(){this._template.remove()}},{key:"_addEventListeners",value:function(e){var t=this;e.addEventListener("click",(function(){t._openPopup(t._name,t._link)}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(t.inputSelector)),this._submitButton=this._form.querySelector(t.submitButtonSelector)}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){return e.preventDefault()})),this._setEventListeners()}},{key:"clearForm",value:function(){var e=this;this._form.reset(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_setEventListeners",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e.toggleButtonState()}))}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.setAttribute("disabled","true")):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.removeAttribute("disabled"))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=e.parentNode.querySelector(".".concat(this._errorClass));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=e.parentNode.querySelector(".".concat(this._errorClass));e.classList.remove(this._inputErrorClass),t.textContent=""}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(e){var t=this;this.clear(),e.forEach((function(e){t._renderer(e)}))}},{key:"setItems",value:function(e){this._renderedItems=e}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(e._popup.classList.contains("opened")&&t.target===e._popup.querySelector(".popup__container-close-button")||t.target===e._popup)&&e.close()}))}}])&&a(t.prototype,n),e}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._image=t._popup.querySelector(".popup__image"),t}return t=a,(n=[{key:"open",value:function(e,t){this._popup.querySelector(".popup__description").textContent=e,this._image.src=t,this._image.alt=e,l(h(a.prototype),"open",this).call(this)}}])&&s(t.prototype,n),a}(u);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._submitCallback=t,n._button=n._popup.querySelector(".popup__container-form-save-button"),n._textContainer=n._button.textContent,n._form=n._popup.querySelector(".popup__container-form"),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=Array.from(this._popup.getElementsByTagName("input")),t={};return e.forEach((function(e){t[e.getAttribute("Name")]=e.value})),t}},{key:"setEventListeners",value:function(){var e=this;v(k(a.prototype),"setEventListeners",this).call(this),this._popup.querySelector(".popup__container-form-save-button").addEventListener("click",(function(){e._renderLoading(),e._submitCallback(e._getInputValues())}))}},{key:"close",value:function(){v(k(a.prototype),"close",this).call(this),this._form.reset()}},{key:"_renderLoading",value:function(){this._button.textContent="Сохранение..."}},{key:"resetSubmitButton",value:function(){this._button.textContent=this._textContainer}}])&&y(t.prototype,n),a}(u);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(t),this._profileTitle=document.querySelector(n),this._profileAvatar=document.querySelector(r),this._editedProfileName=document.querySelector(".popup__container-form-input_text_username"),this._editedProfileTitle=document.querySelector(".popup__container-form-input_text_profession")}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,about:this._profileTitle.textContent,avatar:this._avatar}}},{key:"setUserInfo",value:function(e){e.name&&e.about?(this._profileName.textContent=e.name,this._profileTitle.textContent=e.about):console.log("Ошибка загрузки профиля")}},{key:"setUserAvatar",value:function(e){e.avatar?this._profileAvatar.src=e.avatar:console.log("Ошибка загрузки аватара")}},{key:"setUserId",value:function(e,t){if(e)return e._id=t;console.log("Ошибка загрузки ID gользователя")}}])&&S(t.prototype,n),e}();function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._authorization=t.authorization,this._contentTip=t.contentTip}var t,n;return t=e,(n=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getCards",value:function(e){var t=this;return fetch("".concat(this._url,"cards"),{method:"GET",headers:{authorization:this._authorization,"Content-Type":this._contentTip}}).then((function(e){return e.json()})).then((function(e){t.res=e,t._getResponseData}))}},{key:"getProfile",value:function(){var e=this;return fetch("".concat(this._url,"users/me"),{method:"GET",headers:{authorization:this._authorization,"Content-Type":this._contentTip}}).then((function(e){return e.json()})).then((function(t){e.res=t,e._getResponseData}))}},{key:"getUserId",value:function(e){return e?(this._id=e._id,this._id):this._id}},{key:"editProfileInfo",value:function(e){return fetch("".concat(this._url,"users/me"),{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":this._contentTip},body:JSON.stringify({name:e.name,about:e.about})}).then(this._getResponseData)}},{key:"editProfileAvatar",value:function(e){return fetch("".concat(this._url,"users/me/avatar"),{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":this._contentTip},body:JSON.stringify({avatar:e.avatar})}).then(this._getResponseData)}},{key:"addCard",value:function(e){return fetch("".concat(this._url,"cards"),{method:"POST",headers:{authorization:this._authorization,"Content-Type":this._contentTip},body:JSON.stringify({link:e.link,name:e.name})}).then(this._getResponseData)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"cards/").concat(e._id),{method:"DELETE",headers:{authorization:this._authorization,"Content-Type":this._contentTip}}).then(this._getResponseData)}},{key:"setLike",value:function(e){return fetch("".concat(this._url,"cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._authorization,"Content-Type":this._contentTip}}).then(this._getResponseData)}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._url,"cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._authorization,"Content-Type":this._contentTip}}).then((function(e){return t._getResponseData(e)}))}}])&&w(t.prototype,n),e}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function a(e){var t,n=e.popupSelector,r=e.formSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._form=t._popup.querySelector(".popup__container-form"),t.button=t._popup.querySelector(".popup__container-form-save-button"),t._formSubmit=r,t}return t=a,(n=[{key:"open",value:function(e){T(q(a.prototype),"open",this).call(this),this.button.textContent="Да",this._card=e}},{key:"setEventListeners",value:function(){var e=this;T(q(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._renderLoading(),e._formSubmit(e._card)}))}},{key:"_renderLoading",value:function(){this.button.textContent="Удаление..."}}])&&O(t.prototype,n),a}(u),R={formSelector:".popup__container-form",inputSelector:".popup__container-form-input",submitButtonSelector:".popup__container-form-save-button",inactiveButtonClass:"popup__container-form-save-button_disabled",inputErrorClass:"popup__container-form-input_error",errorClass:"error"},B=document.querySelector(".add-place").querySelector(".popup__container-form"),x=document.querySelector(".profile-popup").querySelector(".popup__container-form"),D=document.querySelector(".avatar").querySelector(".popup__container-form"),z=document.querySelector(".popup__container-form-input_text_username"),A=document.querySelector(".popup__container-form-input_text_profession"),U=document.querySelector(".profile__info-edit-button"),N=document.querySelector(".profile__avatar-container"),V={about:"",avatar:"",cohort:"cohort-27",name:"",_id:"3fe0c274-9eb1-4b1e-a5bb-2bea77a9fe15"};function F(e){var n;n=function(e){var n=new t({card:e,handleCardClick:function(e,t){W.open(e,t)},userData:M.getUserId(),handleCardLike:function(t){return t.target.classList.contains("elements__item-description-like-button__active")?M.deleteLike(e._id).catch((function(e){return console.error(e)})):M.setLike(e._id).catch((function(e){return console.error(e)}))},handleCardDelete:function(){$.open(e),$.button.addEventListener("click",(function(){n.delete()}))}},"#card");return n}(e).createCard(),Q.addItem(n)}var H=new r(R,B);H.enableValidation();var J=new r(R,x);J.enableValidation();var G=new r(R,D);G.enableValidation();var M=new E({url:"https://mesto.nomoreparties.co/v1/cohort-27/",authorization:"3fe0c274-9eb1-4b1e-a5bb-2bea77a9fe15",contentTip:"application/json"}),K=new C(".profile__info-username",".profile__info-profession",".profile__avatar");M.getProfile().then((function(){K.setUserId(V,M.getUserId(M.res)),K.setUserInfo(M.res),K.setUserAvatar(M.res)})).catch((function(e){return console.error(e)}));var Q=new i({items:[],renderer:function(e){F(e)}},".elements");M.getCards(Q).then((function(){M.res.some((function(e){return e._id}))&&M._id?Q.renderItems(M.res.reverse()):console.log("Ошибка: проблема с принадлежностью карточек")})).catch((function(e){return console.error(e)}));var W=new _(".image-popup");W.setEventListeners();var X=new g(".profile-popup",(function(e){M.editProfileInfo(e).then((function(){K.setUserInfo(e),X.resetSubmitButton(),X.close()})).catch((function(e){return console.error(e)}))}));X.setEventListeners();var Y=new g(".avatar",(function(e){M.editProfileAvatar(e).then((function(){K.setUserAvatar(e),Y.close(),G.toggleButtonState(),Y.resetSubmitButton()})).catch((function(e){return console.error(e)}))}));Y.setEventListeners();var Z=new g(".add-place",(function(e){e.likes=[],e.likes.length=0,e.likes._id="fbb15bf9e92462388044ef4e",e.owner={name:"",_id:""},e.owner.name=V.name,e.owner._id=V._id,M.addCard(e).then((function(t){console.log(t),e._id=t._id,F(e),Z.resetSubmitButton(),Z.close()})).catch((function(e){return console.error(e)}))}));Z.setEventListeners();var $=new I({popupSelector:".delete-popup",formSubmit:function(e){M.deleteCard(e).then((function(){$._button.textContent=$._textContainer,$.close()})).catch((function(e){return console.error(e)}))}});$.setEventListeners(),U.addEventListener("click",(function(){J.clearForm();var e=K.getUserInfo();z.value=e.name,A.value=e.about,J.toggleButtonState(),X.open()})),document.querySelector(".profile__add-button").addEventListener("click",(function(){H.clearForm(),H.toggleButtonState(),Z.open()})),N.addEventListener("click",(function(){G.clearForm(),G.toggleButtonState(),Y.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b21wb25lbnRzL2NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvanMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2pzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9qcy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2pzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvanMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2pzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvanMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvanMvY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9qcy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmR7XHJcbiAgY29uc3RydWN0b3IoeyBjYXJkLCBoYW5kbGVDYXJkQ2xpY2ssIHVzZXJEYXRhLCBoYW5kbGVDYXJkTGlrZSwgaGFuZGxlQ2FyZERlbGV0ZSB9LCBjYXJkU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWUgPSBjYXJkLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gY2FyZC5saW5rO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBjYXJkLmxpa2VzXHJcbiAgICB0aGlzLl9jb3VudGVyTGlrZXMgPSBjYXJkLmxpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmQuX2lkO1xyXG4gICAgdGhpcy5fb3duZXJOYW1lID0gY2FyZC5vd25lci5uYW1lO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGNhcmQub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fdXNlciA9IHVzZXJEYXRhO1xyXG4gICAgdGhpcy5fY2FyZCA9IGNhcmRcclxuXHJcbiAgICB0aGlzLl9vcGVuUG9wdXAgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSA9IGhhbmRsZUNhcmRMaWtlO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSA9IGhhbmRsZUNhcmREZWxldGU7XHJcblxyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gIH1cclxuICBfZ2V0VGVtcGxhdGUoKXtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnRcclxuICB9XHJcbiAgY3JlYXRlQ2FyZCgpe1xyXG4gICAgdGhpcy5fdGVtcGxhdGUgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gdGhpcy5fdGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19pdGVtLWltYWdlJyk7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2l0ZW0tZGVzY3JpcHRpb24tdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICBpbWFnZUVsZW1lbnQuYWx0ID0gJ9C30LTQtdGB0Ywg0LTQvtC70LbQvdCwINCx0YvRgtGMINC60LDRgNGC0LjQvdC60LAgJyArIHRoaXMuX25hbWU7XHJcbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKGltYWdlRWxlbWVudCk7XHJcbiAgICB0aGlzLl9saWtlTGlzdGVuZXIoKTtcclxuICAgIHRoaXMuX2RlbGV0ZUxpc3RlbmVyKCk7XHJcbiAgICB0aGlzLl9zZXRMaWtlZFN0YXR1cygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX3RlbXBsYXRlXHJcbiAgfVxyXG4gIF9saWtlTGlzdGVuZXIoKXtcclxuICAgIHRoaXMuX3RlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19faXRlbS1kZXNjcmlwdGlvbi1saWtlLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlKGV2dClcclxuICAgICAgLnRoZW4oY2FyZCA9PiB7XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50c19faXRlbS1kZXNjcmlwdGlvbi1saWtlLWJ1dHRvbl9fYWN0aXZlJyk7XHJcbiAgICAgICAgdGhpcy5fc2V0TGlrZXMoY2FyZCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuICAgIH0pXHJcbiAgfVxyXG4gIF9zZXRMaWtlcyhjYXJkKXtcclxuICAgIHRoaXMuX2xpa2VzQ291bnRlci50ZXh0Q29udGVudCA9IGNhcmQubGlrZXMubGVuZ3RoO1xyXG4gIH1cclxuICBfc2V0TGlrZWRTdGF0dXMoKSB7XHJcbiAgICB0aGlzLl9saWtlc0NvdW50ZXIgPSB0aGlzLl90ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2l0ZW0tZGVzY3JpcHRpb24tbGlrZS1jb3VudGVyJyk7XHJcbiAgICB0aGlzLl9saWtlc0NvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9jb3VudGVyTGlrZXM7XHJcbiAgICBjb25zdCBpc0xpa2VkID0gdGhpcy5fbGlrZXMuc29tZShsaWtlcyA9PiBsaWtlcy5faWQgPT09IHRoaXMuX3VzZXIpO1xyXG4gICAgaWYgKGlzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fdGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19pdGVtLWRlc2NyaXB0aW9uLWxpa2UtYnV0dG9uJykuY2xhc3NMaXN0LmFkZCgnZWxlbWVudHNfX2l0ZW0tZGVzY3JpcHRpb24tbGlrZS1idXR0b25fX2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH1cclxuICBfZGVsZXRlTGlzdGVuZXIoKXtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX3RlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19faXRlbS1kZXNjcmlwdGlvbi1kZWxldGUtYnV0dG9uJylcclxuICAgIGlmICghKHRoaXMuX293bmVySWQgPT09IHRoaXMuX3VzZXIpKXtcclxuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3JlbW92ZWQnKVxyXG4gICAgfSBlbHNle1xyXG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlKClcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcbiAgZGVsZXRlKCl7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZS5yZW1vdmUoKVxyXG4gIH1cclxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoaW1hZ2VFbGVtZW50KXtcclxuICAgIGltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge3RoaXMuX29wZW5Qb3B1cCh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTt9KTtcclxuICB9XHJcblxyXG59IiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3J7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm0pe1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcbiAgZW5hYmxlVmFsaWRhdGlvbiAoKXtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4gZXZ0LnByZXZlbnREZWZhdWx0KCkpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbiAgY2xlYXJGb3JtKCl7XHJcbiAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKVxyXG4gICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxyXG4gICAgICB9KVxyXG4gIH1cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpXHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpe1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ3RydWUnKVxyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJylcclxuICB9XHJcbn1cclxuICBfaGFzSW52YWxpZElucHV0KCl7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZClcclxuICB9XHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpe1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKXtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGlucHV0RWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuX2Vycm9yQ2xhc3N9YCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpe1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gaW5wdXRFbGVtZW50LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5fZXJyb3JDbGFzc31gKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgY2xlYXIoKXtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gJydcclxuICAgIH1cclxuICAgIHJlbmRlckl0ZW1zKGNhcmRzKSB7XHJcbiAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgY2FyZHMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRJdGVtcyhjYXJkcyl7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBjYXJkcztcclxuICAgIH1cclxuICB9IiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuXHRjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcylcclxuXHJcblx0fVxyXG4gICAgb3Blbigpe1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJvcGVuZWRcIilcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXHJcbiAgICB9XHJcbiAgICBjbG9zZSgpe1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuZWRcIik7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpe1xyXG4gICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblx0c2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICgodGhpcy5fcG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuZWQnKSkgJiYgKGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGFpbmVyLWNsb3NlLWJ1dHRvbicpKSB8fCAoZXZ0LnRhcmdldCA9PT0gdGhpcy5fcG9wdXApKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICB9XHJcbn0iLCJpbXBvcnQge1BvcHVwfSBmcm9tICcuL1BvcHVwLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxyXG4gICAgICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIG9wZW4obmFtZSwgbGluayl7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19kZXNjcmlwdGlvbicpLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rXHJcbiAgICAgICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZVxyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgICAgICB9XHJcbn0iLCJpbXBvcnQge1BvcHVwfSBmcm9tICcuL1BvcHVwLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdENhbGxiYWNrKXtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxyXG4gICAgICAgIHRoaXMuX3N1Ym1pdENhbGxiYWNrID0gc3VibWl0Q2FsbGJhY2tcclxuICAgICAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbnRhaW5lci1mb3JtLXNhdmUtYnV0dG9uJylcclxuICAgICAgICB0aGlzLl90ZXh0Q29udGFpbmVyID0gdGhpcy5fYnV0dG9uLnRleHRDb250ZW50Ly/QuNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0LTQu9GPINGF0YDQsNC90LXQvdC40Y8g0LjQt9C90LDRh9Cw0LvRjNC90L7QuSDQvdCw0LTQv9C40YHQuCwg0LjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPINC/0L7RgdC70LUg0YHQvtGF0YDQsNC90LXQvdC40Y9cclxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXItZm9ybScpXHJcbiAgICB9XHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKXtcclxuICAgICAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpKVxyXG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcbiAgICAgICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0VmFsdWVzW2lucHV0LmdldEF0dHJpYnV0ZSgnTmFtZScpXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgICB9XHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXItZm9ybS1zYXZlLWJ1dHRvbicpXHJcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlckxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N1Ym1pdENhbGxiYWNrKHRoaXMuX2dldElucHV0VmFsdWVzKCkpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIGNsb3NlKCl7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICBfcmVuZGVyTG9hZGluZygpe1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XHJcbiAgICB9XHJcbiAgICByZXNldFN1Ym1pdEJ1dHRvbigpe1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3RleHRDb250YWluZXJcclxuICAgIH1cclxufSIsImV4cG9ydCAgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcikge1xyXG4gICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKVxyXG4gICAgICB0aGlzLl9wcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpXHJcbiAgICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKVxyXG5cclxuICAgICAgdGhpcy5fZWRpdGVkUHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jb250YWluZXItZm9ybS1pbnB1dF90ZXh0X3VzZXJuYW1lXCIpXHJcbiAgICAgIHRoaXMuX2VkaXRlZFByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NvbnRhaW5lci1mb3JtLWlucHV0X3RleHRfcHJvZmVzc2lvblwiKVxyXG5cclxuICAgIH1cclxuICBcclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICBjb25zdCBwcm9maWxlRGF0YSA9IHtcclxuICAgICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgICBhYm91dDogdGhpcy5fcHJvZmlsZVRpdGxlLnRleHRDb250ZW50LFxyXG4gICAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyLCBcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHByb2ZpbGVEYXRhO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgc2V0VXNlckluZm8ocHJvZmlsZURhdGEpIHtcclxuICAgICAgaWYgKHByb2ZpbGVEYXRhLm5hbWUgJiYgcHJvZmlsZURhdGEuYWJvdXQpe1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gcHJvZmlsZURhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9wcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSBwcm9maWxlRGF0YS5hYm91dDtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ9Ce0YjQuNCx0LrQsCDQt9Cw0LPRgNGD0LfQutC4INC/0YDQvtGE0LjQu9GPJylcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2V0VXNlckF2YXRhcihwcm9maWxlRGF0YSl7XHJcbiAgICAgIGlmIChwcm9maWxlRGF0YS5hdmF0YXIpe1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gcHJvZmlsZURhdGEuYXZhdGFyO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICBjb25zb2xlLmxvZygn0J7RiNC40LHQutCwINC30LDQs9GA0YPQt9C60Lgg0LDQstCw0YLQsNGA0LAnKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXRVc2VySWQocHJvZmlsZURhdGEsIGlkKXtcclxuICAgICAgaWYgKHByb2ZpbGVEYXRhKXtcclxuICAgICAgICByZXR1cm4gcHJvZmlsZURhdGEuX2lkID0gaWRcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ9Ce0YjQuNCx0LrQsCDQt9Cw0LPRgNGD0LfQutC4IElEIGfQvtC70YzQt9C+0LLQsNGC0LXQu9GPJylcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0iLCJleHBvcnQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncykge1xyXG4gICAgdGhpcy5fdXJsID0gc2V0dGluZ3MudXJsO1xyXG4gICAgdGhpcy5fYXV0aG9yaXphdGlvbiA9IHNldHRpbmdzLmF1dGhvcml6YXRpb247XHJcbiAgICB0aGlzLl9jb250ZW50VGlwID0gc2V0dGluZ3MuY29udGVudFRpcDtcclxuICB9XHJcbiAgX2dldFJlc3BvbnNlRGF0YShyZXMpIHtcclxuICAgIGlmICghcmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZHMoY2FyZExpc3QpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9Y2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiB0aGlzLl9jb250ZW50VGlwLFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgdGhpcy5yZXMgPSByZXNcclxuICAgICAgdGhpcy5fZ2V0UmVzcG9uc2VEYXRhXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0UHJvZmlsZSgpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9dXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiB0aGlzLl9jb250ZW50VGlwLFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXHJcbiAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHRoaXMucmVzID0gcmVzXHJcbiAgICAgICAgdGhpcy5fZ2V0UmVzcG9uc2VEYXRhXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0VXNlcklkKHJlcyl7XHJcbiAgICBpZiAocmVzKXtcclxuICAgICAgdGhpcy5faWQgPSByZXMuX2lkXHJcbiAgICAgIHJldHVybiB0aGlzLl9pZFxyXG4gICAgfWVsc2V7XHJcbiAgICAgIHJldHVybiB0aGlzLl9pZFxyXG4gICAgfVxyXG4gIH1cclxuICBlZGl0UHJvZmlsZUluZm8ocHJvZmlsZURhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9dXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IHRoaXMuX2NvbnRlbnRUaXBcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IHByb2ZpbGVEYXRhLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IHByb2ZpbGVEYXRhLmFib3V0XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2VEYXRhKTtcclxuICB9XHJcbiAgZWRpdFByb2ZpbGVBdmF0YXIocHJvZmlsZURhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9dXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiB0aGlzLl9jb250ZW50VGlwXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IHByb2ZpbGVEYXRhLmF2YXRhclxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSk7XHJcbiAgfVxyXG4gIGFkZENhcmQoY2FyZEluZm8pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9Y2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogdGhpcy5fY29udGVudFRpcFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbGluazogY2FyZEluZm8ubGluayxcclxuICAgICAgICBuYW1lOiBjYXJkSW5mby5uYW1lXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2VEYXRhKTtcclxuICB9XHJcbiAgZGVsZXRlQ2FyZChjYXJkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfWNhcmRzLyR7Y2FyZC5faWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogdGhpcy5fY29udGVudFRpcCxcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSk7XHJcbiAgfVxyXG4gIHNldExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfWNhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IHRoaXMuX2NvbnRlbnRUaXAsXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9nZXRSZXNwb25zZURhdGEpO1xyXG4gIH1cclxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH1jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiB0aGlzLl9jb250ZW50VGlwLFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gIH1cclxufSIsImltcG9ydCB7UG9wdXB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aERlbGV0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgZm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbnRhaW5lci1mb3JtJyk7XHJcbiAgICB0aGlzLmJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGFpbmVyLWZvcm0tc2F2ZS1idXR0b24nKTtcclxuICAgIHRoaXMuX2Zvcm1TdWJtaXQgPSBmb3JtU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgb3BlbihjYXJkKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLmJ1dHRvbi50ZXh0Q29udGVudCA9ICfQlNCwJztcclxuICAgIHRoaXMuX2NhcmQgPSBjYXJkO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBldnQgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fcmVuZGVyTG9hZGluZygpO1xyXG4gICAgICB0aGlzLl9mb3JtU3VibWl0KHRoaXMuX2NhcmQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfcmVuZGVyTG9hZGluZygpe1xyXG4gICAgdGhpcy5idXR0b24udGV4dENvbnRlbnQgPSAn0KPQtNCw0LvQtdC90LjQtS4uLic7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19jb250YWluZXItZm9ybScsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19jb250YWluZXItZm9ybS1pbnB1dCcsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fY29udGFpbmVyLWZvcm0tc2F2ZS1idXR0b24nLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19jb250YWluZXItZm9ybS1zYXZlLWJ1dHRvbl9kaXNhYmxlZCcsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9fY29udGFpbmVyLWZvcm0taW5wdXRfZXJyb3InLFxyXG4gICAgZXJyb3JDbGFzczogJ2Vycm9yJ1xyXG4gIH07XHJcbmV4cG9ydCBjb25zdCBjYXJkcyA9IFtdO1xyXG5leHBvcnQgY29uc3QgcG9wdXBTZWxlY3RvcnMgPSB7XHJcbiAgaW1hZ2VQb3B1cDogJy5pbWFnZS1wb3B1cCcsXHJcbiAgcHJvZmlsZVBvcHVwOiAnLnByb2ZpbGUtcG9wdXAnLFxyXG4gIGF2YXRhclBvcHVwOiAnLmF2YXRhcicsXHJcbiAgYWRkUGxhY2VQb3B1cDogJy5hZGQtcGxhY2UnLFxyXG4gIGRlbGV0ZVBvcHVwOiAnLmRlbGV0ZS1wb3B1cCdcclxufVxyXG5jb25zdCBwbGFjZUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXBsYWNlXCIpO1xyXG5leHBvcnQgY29uc3QgcGxhY2VBZGRGb3JtID0gcGxhY2VBZGQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY29udGFpbmVyLWZvcm1cIik7XHJcbmNvbnN0IHByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZS1wb3B1cFwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwRm9ybSA9IHByb2ZpbGVQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jb250YWluZXItZm9ybVwiKTtcclxuY29uc3QgYXZhdGFyRWRpdFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hdmF0YXJcIik7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJGb3JtID0gYXZhdGFyRWRpdFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NvbnRhaW5lci1mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgdGVtcGxhdGVTZWxlY3RvciA9ICcjY2FyZCdcclxuZXhwb3J0IGNvbnN0IGNvbnRhaW5lclNlbGVjdG9yID0gJy5lbGVtZW50cydcclxuZXhwb3J0IGNvbnN0IG5hbWVTZWxlY3RvciA9ICcucHJvZmlsZV9faW5mby11c2VybmFtZSdcclxuZXhwb3J0IGNvbnN0IGFib3V0U2VsZWN0b3IgPSAnLnByb2ZpbGVfX2luZm8tcHJvZmVzc2lvbidcclxuZXhwb3J0IGNvbnN0IGVkaXRlZFVzZXJuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXItZm9ybS1pbnB1dF90ZXh0X3VzZXJuYW1lJylcclxuZXhwb3J0IGNvbnN0IGVkaXRlZFByb2Zlc3Npb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbnRhaW5lci1mb3JtLWlucHV0X3RleHRfcHJvZmVzc2lvbicpXHJcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbmZvLWVkaXQtYnV0dG9uXCIpXHJcbmV4cG9ydCBjb25zdCBhdmF0YXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1jb250YWluZXJcIilcclxuZXhwb3J0IGNvbnN0IGF2YXRhclNlbGVjdG9yID0gJy5wcm9maWxlX19hdmF0YXInXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGF0YSA9IHtcclxuICBhYm91dDogXCJcIixcclxuICBhdmF0YXI6IFwiXCIsXHJcbiAgY29ob3J0OiBcImNvaG9ydC0yN1wiLFxyXG4gIG5hbWU6IFwiXCIsXHJcbiAgX2lkOiBcIjNmZTBjMjc0LTllYjEtNGIxZS1hNWJiLTJiZWE3N2E5ZmUxNVwiXHJcbn07XHJcbmV4cG9ydCBjb25zdCB1c2VySWQgPSAnZmJiMTViZjllOTI0NjIzODgwNDRlZjRlJ1xyXG4iLCJpbXBvcnQgJy4uL3BhZ2VzL2luZGV4LmNzcydcclxuXHJcbmltcG9ydCB7Q2FyZH0gZnJvbSAnLi4vanMvY29tcG9uZW50cy9jYXJkLmpzJztcclxuaW1wb3J0IHtGb3JtVmFsaWRhdG9yfSBmcm9tICcuLi9qcy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5cclxuaW1wb3J0IHtTZWN0aW9ufSBmcm9tICcuLi9qcy9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQge1BvcHVwV2l0aEltYWdlfSBmcm9tICcuLi9qcy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IHtQb3B1cFdpdGhGb3JtfSBmcm9tICcuLi9qcy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQge1VzZXJJbmZvfSBmcm9tICcuLi9qcy9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IHtBcGl9IGZyb20gJy4uL2pzL2NvbXBvbmVudHMvQXBpLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoRGVsZXRpb24gfSBmcm9tICcuLi9qcy9jb21wb25lbnRzL1BvcHVwV2l0aERlbGV0aW9uJztcclxuXHJcbmltcG9ydCB7IFxyXG4gIHNldHRpbmdzLFxyXG4gIGNhcmRzLFxyXG4gIHBvcHVwU2VsZWN0b3JzLFxyXG4gIHBsYWNlQWRkRm9ybSxcclxuICBwb3B1cEZvcm0sXHJcbiAgY29udGFpbmVyU2VsZWN0b3IsXHJcbiAgdGVtcGxhdGVTZWxlY3RvcixcclxuICBuYW1lU2VsZWN0b3IsXHJcbiAgYWJvdXRTZWxlY3RvcixcclxuICBlZGl0QnV0dG9uLFxyXG4gIGVkaXRlZFByb2Zlc3Npb24sXHJcbiAgZWRpdGVkVXNlcm5hbWUsXHJcbiAgYXZhdGFyQ29udGFpbmVyLFxyXG4gIGF2YXRhclNlbGVjdG9yLFxyXG4gIHByb2ZpbGVEYXRhLFxyXG4gIGF2YXRhckZvcm0sXHJcbiAgdXNlcklkXHJcbn0gZnJvbSAnLi4vanMvdXRpbHMvY29uc3RhbnRzLmpzJztcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU5ld0NhcmQoaXRlbSl7XHJcbiAgYWRkTmV3Q2FyZChjcmVhdGVDYXJkKGl0ZW0pKVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pe1xyXG4gIGNvbnN0IG5ld0NhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIGNhcmQ6IGl0ZW0sXHJcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKG5hbWUsIGxpbmspID0+IHtcclxuICAgICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xyXG4gICAgICB9LFxyXG4gICAgICB1c2VyRGF0YTogYXBpLmdldFVzZXJJZCgpLFxyXG4gICAgICBoYW5kbGVDYXJkTGlrZTogKGV2dCk9PntcclxuICAgICAgICBpZiAoIWV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbGVtZW50c19faXRlbS1kZXNjcmlwdGlvbi1saWtlLWJ1dHRvbl9fYWN0aXZlJykpe1xyXG4gICAgICAgICAgcmV0dXJuIGFwaS5zZXRMaWtlKGl0ZW0uX2lkKVxyXG4gICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihlcnIpKVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICByZXR1cm4gYXBpLmRlbGV0ZUxpa2UoaXRlbS5faWQpXHJcbiAgICAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKGVycikpXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVDYXJkRGVsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBEZWxldGUub3BlbihpdGVtKTtcclxuICAgICAgICBwb3B1cERlbGV0ZS5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7bmV3Q2FyZEVsZW1lbnQuZGVsZXRlKCl9KVxyXG4gICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHRlbXBsYXRlU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICByZXR1cm4gbmV3Q2FyZEVsZW1lbnRcclxufVxyXG5mdW5jdGlvbiBhZGROZXdDYXJkKG5ld0NhcmRFbGVtZW50KXtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ld0NhcmRFbGVtZW50LmNyZWF0ZUNhcmQoKTtcclxuICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxufVxyXG5cclxuXHJcbmNvbnN0IHBsYWNlQWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBwbGFjZUFkZEZvcm0pXHJcbnBsYWNlQWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKClcclxuY29uc3QgcHJvZmlsZVBvcHVwRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBwb3B1cEZvcm0pXHJcbnByb2ZpbGVQb3B1cEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXHJcbmNvbnN0IGF2YXRhclBvcHVwRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhdmF0YXJGb3JtKVxyXG5hdmF0YXJQb3B1cEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXHJcblxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgdXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0yNy8nLFxyXG4gIGF1dGhvcml6YXRpb246ICczZmUwYzI3NC05ZWIxLTRiMWUtYTViYi0yYmVhNzdhOWZlMTUnLFxyXG4gIGNvbnRlbnRUaXA6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxufSlcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IpXHJcbmFwaS5nZXRQcm9maWxlKClcclxuICAudGhlbigoKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySWQocHJvZmlsZURhdGEsIGFwaS5nZXRVc2VySWQoYXBpLnJlcykpXHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhhcGkucmVzKTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIoYXBpLnJlcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoZXJyKSlcclxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XHJcbiAgaXRlbXM6IGNhcmRzLFxyXG4gIHJlbmRlcmVyOiAoaXRlbSkgPT57XHJcbiAgICBjcmVhdGVOZXdDYXJkKGl0ZW0pXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgY29udGFpbmVyU2VsZWN0b3JcclxuKTtcclxuYXBpLmdldENhcmRzKGNhcmRMaXN0KVxyXG4gIC50aGVuKCgpID0+IHtcclxuICAgIGlmIChhcGkucmVzLnNvbWUoY2FyZCA9PiBjYXJkLl9pZCkgJiYgKGFwaS5faWQpKXsvL9GA0L7QstC10YDQutCwINC90LAg0L/QvtC70YPRh9C10L3QuNC1IGlkINC60LDRgNGC0L7Rh9C10Log0Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLCBcclxuICAgICAgLy/RgtC+INC10YHRgtGMINC+0L3QuCDQvdC1INC+0YLRgNC40YHRg9GO0YLRgdGPINC00L4g0L/QvtC70YPRh9C10L3QuNGPIGlkINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyBcclxuICAgICAgY2FyZExpc3QucmVuZGVySXRlbXMoYXBpLnJlcy5yZXZlcnNlKCkpXHJcbiAgICB9ZWxzZXtcclxuICAgICAgY29uc29sZS5sb2coXCLQntGI0LjQsdC60LA6INC/0YDQvtCx0LvQtdC80LAg0YEg0L/RgNC40L3QsNC00LvQtdC20L3QvtGB0YLRjNGOINC60LDRgNGC0L7Rh9C10LpcIilcclxuICAgIH1cclxuICB9KVxyXG4gIC5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihlcnIpKVxyXG5cclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBTZWxlY3RvcnMuaW1hZ2VQb3B1cClcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG5cclxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwU2VsZWN0b3JzLnByb2ZpbGVQb3B1cCxcclxuICAoZGF0YSkgPT57XHJcbiAgICBhcGkuZWRpdFByb2ZpbGVJbmZvKGRhdGEpXHJcbiAgICAgIC50aGVuKCgpPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpXHJcbiAgICAgICAgcG9wdXBFZGl0UHJvZmlsZS5yZXNldFN1Ym1pdEJ1dHRvbigpXHJcbiAgICAgICAgcG9wdXBFZGl0UHJvZmlsZS5jbG9zZSgpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihlcnIpKVxyXG4gIH0pXHJcbnBvcHVwRWRpdFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG5cclxuY29uc3QgcG9wdXBFZGl0QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBTZWxlY3RvcnMuYXZhdGFyUG9wdXAsXHJcbiAgKGRhdGEpID0+e1xyXG4gICAgYXBpLmVkaXRQcm9maWxlQXZhdGFyKGRhdGEpXHJcbiAgICAgIC50aGVuKCgpPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIoZGF0YSlcclxuICAgICAgICBwb3B1cEVkaXRBdmF0YXIuY2xvc2UoKVxyXG4gICAgICAgIGF2YXRhclBvcHVwRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpXHJcbiAgICAgICAgcG9wdXBFZGl0QXZhdGFyLnJlc2V0U3VibWl0QnV0dG9uKClcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKGVycikpXHJcbiAgfVxyXG4pXHJcbnBvcHVwRWRpdEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpXHJcblxyXG5jb25zdCBwb3B1cEltYWdlQWRkID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBTZWxlY3RvcnMuYWRkUGxhY2VQb3B1cCxcclxuICAoZGF0YSkgPT4ge1xyXG4gICAgZGF0YS5saWtlcyA9IFtdXHJcbiAgICBkYXRhLmxpa2VzLmxlbmd0aCA9IDA7XHJcbiAgICBkYXRhLmxpa2VzLl9pZCA9IHVzZXJJZDtcclxuICAgIGRhdGEub3duZXIgPSB7XHJcbiAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgIF9pZDogXCJcIlxyXG4gICAgfVxyXG4gICAgZGF0YS5vd25lci5uYW1lID0gcHJvZmlsZURhdGEubmFtZVxyXG4gICAgZGF0YS5vd25lci5faWQgPSBwcm9maWxlRGF0YS5faWRcclxuICAgIGFwaS5hZGRDYXJkKGRhdGEpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpXHJcbiAgICAgICAgZGF0YS5faWQgPSByZXMuX2lkXHJcbiAgICAgICAgY3JlYXRlTmV3Q2FyZChkYXRhKVxyXG4gICAgICAgIHBvcHVwSW1hZ2VBZGQucmVzZXRTdWJtaXRCdXR0b24oKVxyXG4gICAgICAgIHBvcHVwSW1hZ2VBZGQuY2xvc2UoKVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoZXJyKSkgICAgXHJcbiAgfVxyXG4pXHJcbnBvcHVwSW1hZ2VBZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG5cclxuY29uc3QgcG9wdXBEZWxldGUgPSBuZXcgUG9wdXBXaXRoRGVsZXRpb24oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHBvcHVwU2VsZWN0b3JzLmRlbGV0ZVBvcHVwLFxyXG4gIGZvcm1TdWJtaXQ6IChjYXJkKSA9PntcclxuICAgIGFwaS5kZWxldGVDYXJkKGNhcmQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBwb3B1cERlbGV0ZS5fYnV0dG9uLnRleHRDb250ZW50ID0gcG9wdXBEZWxldGUuX3RleHRDb250YWluZXJcclxuICAgICAgICBwb3B1cERlbGV0ZS5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKGVycikpXHJcbiAgfVxyXG59KVxyXG5wb3B1cERlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpXHJcblxyXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcHJvZmlsZVBvcHVwRm9ybVZhbGlkYXRvci5jbGVhckZvcm0oKVxyXG4gIGNvbnN0IGRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGVkaXRlZFVzZXJuYW1lLnZhbHVlID0gZGF0YS5uYW1lO1xyXG4gIGVkaXRlZFByb2Zlc3Npb24udmFsdWUgPSBkYXRhLmFib3V0O1xyXG4gIHByb2ZpbGVQb3B1cEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKTtcclxufSk7XHJcblxyXG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpXHJcbiAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwbGFjZUFkZEZvcm1WYWxpZGF0b3IuY2xlYXJGb3JtKClcclxuICAgIHBsYWNlQWRkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpXHJcbiAgcG9wdXBJbWFnZUFkZC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYXZhdGFyQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PntcclxuICBhdmF0YXJQb3B1cEZvcm1WYWxpZGF0b3IuY2xlYXJGb3JtKClcclxuICBhdmF0YXJQb3B1cEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKVxyXG4gIHBvcHVwRWRpdEF2YXRhci5vcGVuKClcclxufSkiXSwibmFtZXMiOlsiQ2FyZCIsImNhcmRTZWxlY3RvciIsImNhcmQiLCJoYW5kbGVDYXJkQ2xpY2siLCJ1c2VyRGF0YSIsImhhbmRsZUNhcmRMaWtlIiwiaGFuZGxlQ2FyZERlbGV0ZSIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9jb3VudGVyTGlrZXMiLCJsZW5ndGgiLCJfY2FyZElkIiwiX2lkIiwiX293bmVyTmFtZSIsIm93bmVyIiwiX293bmVySWQiLCJfdXNlciIsIl9jYXJkIiwiX29wZW5Qb3B1cCIsIl9oYW5kbGVDYXJkTGlrZSIsIl9oYW5kbGVDYXJkRGVsZXRlIiwiX2NhcmRTZWxlY3RvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfdGVtcGxhdGUiLCJfZ2V0VGVtcGxhdGUiLCJpbWFnZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImFsdCIsInNyYyIsIl9hZGRFdmVudExpc3RlbmVycyIsIl9saWtlTGlzdGVuZXIiLCJfZGVsZXRlTGlzdGVuZXIiLCJfc2V0TGlrZWRTdGF0dXMiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwidGhlbiIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9zZXRMaWtlcyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiX2xpa2VzQ291bnRlciIsInNvbWUiLCJhZGQiLCJfZGVsZXRlQnV0dG9uIiwicmVtb3ZlIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybSIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicmVzZXQiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2hpZGVJbnB1dEVycm9yIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hhc0ludmFsaWRJbnB1dCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsInBhcmVudE5vZGUiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJpbm5lckhUTUwiLCJjYXJkcyIsImNsZWFyIiwiaXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiY2xvc2UiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdENhbGxiYWNrIiwiX3N1Ym1pdENhbGxiYWNrIiwiX2J1dHRvbiIsIl90ZXh0Q29udGFpbmVyIiwiaW5wdXRMaXN0IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwiZ2V0QXR0cmlidXRlIiwidmFsdWUiLCJfcmVuZGVyTG9hZGluZyIsIl9nZXRJbnB1dFZhbHVlcyIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVUaXRsZSIsIl9wcm9maWxlQXZhdGFyIiwiX2VkaXRlZFByb2ZpbGVOYW1lIiwiX2VkaXRlZFByb2ZpbGVUaXRsZSIsImFib3V0IiwiYXZhdGFyIiwiX2F2YXRhciIsInByb2ZpbGVEYXRhIiwibG9nIiwiaWQiLCJBcGkiLCJfdXJsIiwidXJsIiwiX2F1dGhvcml6YXRpb24iLCJhdXRob3JpemF0aW9uIiwiX2NvbnRlbnRUaXAiLCJjb250ZW50VGlwIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhcmRMaXN0IiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiX2dldFJlc3BvbnNlRGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZEluZm8iLCJjYXJkSWQiLCJQb3B1cFdpdGhEZWxldGlvbiIsImZvcm1TdWJtaXQiLCJidXR0b24iLCJfZm9ybVN1Ym1pdCIsImZvcm1TZWxlY3RvciIsInBsYWNlQWRkRm9ybSIsInBvcHVwRm9ybSIsImF2YXRhckZvcm0iLCJlZGl0ZWRVc2VybmFtZSIsImVkaXRlZFByb2Zlc3Npb24iLCJlZGl0QnV0dG9uIiwiYXZhdGFyQ29udGFpbmVyIiwiY29ob3J0IiwiY3JlYXRlTmV3Q2FyZCIsImNhcmRFbGVtZW50IiwibmV3Q2FyZEVsZW1lbnQiLCJwb3B1cFdpdGhJbWFnZSIsIm9wZW4iLCJhcGkiLCJnZXRVc2VySWQiLCJkZWxldGVMaWtlIiwic2V0TGlrZSIsInBvcHVwRGVsZXRlIiwiZGVsZXRlIiwiY3JlYXRlQ2FyZCIsImFkZEl0ZW0iLCJwbGFjZUFkZEZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJvZmlsZVBvcHVwRm9ybVZhbGlkYXRvciIsImF2YXRhclBvcHVwRm9ybVZhbGlkYXRvciIsInVzZXJJbmZvIiwiZ2V0UHJvZmlsZSIsInNldFVzZXJJZCIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImdldENhcmRzIiwicmVuZGVySXRlbXMiLCJyZXZlcnNlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cEVkaXRQcm9maWxlIiwiZGF0YSIsImVkaXRQcm9maWxlSW5mbyIsInJlc2V0U3VibWl0QnV0dG9uIiwicG9wdXBFZGl0QXZhdGFyIiwiZWRpdFByb2ZpbGVBdmF0YXIiLCJwb3B1cEltYWdlQWRkIiwiYWRkQ2FyZCIsImRlbGV0ZUNhcmQiLCJjbGVhckZvcm0iLCJnZXRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=